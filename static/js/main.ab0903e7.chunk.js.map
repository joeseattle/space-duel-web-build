{"version":3,"sources":["WebSpaceDuel/WebSpaceDuel.ts","WebSpaceDuel/ship1.png","WebSpaceDuel/ship2.png","WebSpaceDuel/GameRunner.ts","WebSpaceDuel/backgr.png","WebSpaceDuel/ship1-thrust.png","WebSpaceDuel/ship2-thrust.png","WebSpaceDuel/explos09.png","WebSpaceDuel/sun.png","WebSpaceDuel/MachineLearningAgent.ts","GameContainer.tsx","Instructions.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["PlayerType","SUN_INFO","PLAYER_INFO","GameRunner","mountElement","player1IsHuman","player2IsHuman","player2Agent","notifyEnd","timespeed","width","height","tickInput","_running","player1IsAlive","player2IsAlive","engine","render","runner","dimensions","center","sun","player1","player2","this","Matter","Vector","create","Math","floor","Engine","timing","timeScale","gravity","scale","setAttribute","Render","element","options","wireframes","background","run","Runner","Events","on","handleTick","bind","handleAfterTick","handleCollision","buildSun","buildPlayer","ship1Sprite","ship2Sprite","Composite","add","world","rotateLeft","rotateRight","accelUp","accelDown","fireBullet","document","addEventListener","handleKeyDown","handleKeyUp","running","enabled","stop","innerHTML","rebase","clear","event","pairs","pair","a","bodyA","b","bodyB","body","createExplosionAt","position","remove","allBodies","applyGravity","accelBody","sprite","texture","rotateBody","shootBullet","player2Input","decideNextTickInput","player1Alive","player2Alive","rewardAfterTick","fromSun","toBody","gravityVector","x","y","Body","applyForce","mult","normalise","direction","rotate","upVector","angle","label","color","startingDirection","startingPosition","bullet","Bodies","circle","frictionAir","frictionStatic","fillStyle","shootVector","setVelocity","setMass","mass","xScale","yScale","boom","isStatic","collisionFilter","mask","group","category","addSprite","strokeStyle","radianStartingSpot","cos","PI","sin","player","rectangle","perpendicularVelocityAngle","player1KeyMapping","key","player2KeyMapping","MachineLearningAgent","ml_solver","ml_env","ML_NUM_INPUTS","ML_NUM_ACTIONS","ML_TEMPORAL_WINDOW","tickCount","DQNEnv","ml_opts","getMlOptions","DQNSolver","network_size","layer_defs","push","type","out_sx","out_sy","out_depth","num_neurons","activation","num_classes","opts","DQNOpt","setTrainingMode","setNumberOfHiddenUnits","setEpsilonDecay","setEpsilon","setGamma","setAlpha","setLossClipping","setLossClamp","setRewardClipping","setRewardClamp","setExperienceSize","setReplayInterval","setReplaySteps","envState","playerInput","sunDifferenceVector","sub","sunDistance","magnitude","sunAngleOfAttack","playerDifferenceVector","playerDistance","nextState","action","decide","learn","state","fromJSON","toJSON","didWin","WebSpaceDuel","score","gameOptions","rounds","winsShip1","winsShip2","bulletsFired","trainAgent","destroy","Human","onGameEnd","player1Win","console","log","JSON","stringify","saveState","rewardGame","newGame","setRunning","isRunning","GameContainer","props","canvasDivRef","game","React","createRef","AILevel1","showInstructions","current","mountGame","handleNewGame","pauseGame","e","target","newValue","checked","name","setState","className","onClick","toggleInstructions","htmlFor","id","onChange","toggleTraining","handleCheckChange","colSpan","ref","Component","App","href","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ab0903e7.chunk.js","sourcesContent":["import {GameRunner} from \"./GameRunner\";\nimport {Agent} from \"./Agent\";\nimport {MachineLearningAgent} from \"./MachineLearningAgent\";\n\nexport interface Score {\n    rounds: number,\n    winsShip1: number,\n    winsShip2: number,\n    bulletsFired: number\n}\n\nexport enum PlayerType {\n    Human,\n    AILevel1,\n    AILevel2\n}\n\nexport interface GameOptions {\n    player1: PlayerType,\n    player2: PlayerType,\n    width: number,\n    height: number,\n    showInstructions: boolean,\n    trainAgent: boolean\n}\n\nexport class WebSpaceDuel {\n\n    private readonly score : Score;\n    private runner: GameRunner | null;\n    private gameOptions: GameOptions | null;\n    private mountElement: HTMLDivElement | null;\n    private player2Agent: Agent | null;\n\n    constructor() {\n        this.score = {\n            rounds: 0,\n            winsShip1: 0,\n            winsShip2: 0,\n            bulletsFired: 0\n        };\n\n        this.runner = null;\n        this.gameOptions = null;\n        this.mountElement = null;\n        this.player2Agent = null;\n    }\n\n    public mountGame(mountElement: HTMLDivElement){\n        this.mountElement = mountElement;\n    }\n\n    public newGame(options: GameOptions){\n        if(this.mountElement){\n            this.gameOptions = options;\n            if (this.player2Agent == null || !options.trainAgent){\n                this.player2Agent = new MachineLearningAgent(options.width, options.height);\n                //this.player2Agent.loadState();\n            }\n            this.runner?.destroy();\n            this.runner = new GameRunner(\n                this.mountElement,\n                options.player1 === PlayerType.Human,\n                options.player2 === PlayerType.Human,\n                this.player2Agent,\n                this.onGameEnd.bind(this),\n                (options.trainAgent ? 10 : 1),\n                options.width,\n                options.height\n            );\n        }\n    }\n\n    public onGameEnd(player1Win: boolean) {\n        console.log(`Game Ended, player1 won = ${player1Win}`);\n        if (!player1Win) {\n            console.log(JSON.stringify(this.player2Agent?.saveState()));\n        }\n        if (this.gameOptions?.trainAgent){\n            this.player2Agent?.rewardGame(!player1Win);\n            this.newGame(this.gameOptions);\n        }\n    }\n\n    public pauseGame(){\n        if(this.runner){\n            this.runner.setRunning(!this.runner.isRunning());\n        }\n    }\n\n    public isPaused(): boolean{\n        console.log(\"Checking is Paused\");\n        return this.runner?.isRunning() || false;\n    }\n\n    public getScore(): Score {\n        return this.score;\n    }\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1gwcFgkPjloprgAAABd0RVh0Q29tbWVudAAgSE9UU1BPVCAxMCAxNwqzzI0JAAAD30lEQVR42qVWv09bVxT+/J6fjY2N8Q+MYxkGYAEElsofUEUyQxV1qcQUKVOlsCCxdQ1sqGLrEDw0UkYypBMLVSpl6dA4SKDUOErBojY//APsAP7t9/LdWwspQ+sq90pHuu/d+777nXO+c+6zoc/wer3Y2PjJyucdODx8jZERC9vb248vLy+T+Jeh9QO9vr5GPt/B8XEYhvEdut1v4Pf7t8DxxaBzc3PW8PAwbDZdmqbpCAQC+K9h74NJIBsaDaMHCrRabdB1NVBd1xGJDKJQcMM0uxgaAiqVyoaS+9lsdjGXM/HxY5fWwdVVE5ZlHamAMjHdX32+xl1MPR6NcdUSSqChUMhyOgME80gzDId4t6QU09HRUboLCWiaHepWp14PbSpMmaACk2NHsViVVq9fYWZmxlIBldm/vdV6MdWkMc5qkiIAmWqo1SrCfcrpCplMxqbM9OnTVTx8WMKjR1WC/yLKNNGXKWPEhpG3VatVCj1ira2tgc9ot9sIh8PY29uD0+mEy+WSzNfX13fF2unpqdAsNjc3P2OuM7vW8vIyYrHYk3K5/ERkeXBwEF5udp+dIcSP42NjKLx7B0+pBDcP9rNerz98ADj/8/xclO23tVotecdUgMTjcUxMTGB6elpsYEc6xoP37xGv16FxTjqw67pkNUcz02k0Ox00OJ+tVDAOLPzMg275LEHJFGNkYpomJicn2TBaomIQfPkSUYLC4QD95s5eTrmGmxuAay0S8J2c4KtQCN9PTFi/lct4xXfawMBAb6+QiwyNAJaHgCZByFKCkh2HZM65XBfDRmtzrvN7t2HAfsKTRFJEks4YQ5roQvj67VsMMTkaN3b5gdVzzckDGnw2hLtM2i6LY5fs/iD7bKslWdkZw8epVGrr4OAA+/v7ku3i4iIu7t/HK7LL5XLwke3IvXuIjY+jwIxTuMhyrzsaxe8XF3jx7Nln2RegSd45W6KeG42GUIFFQ5RxlvIIsJlEIgjy3V8EzPF6Geeah3E8OjqSvYGyu2Q5B/B/BzvSdiKRsJLJpLWzs2OtrKzIOChVFFksra7+iDdv5vH8uQ/N5gMog9KtF/W6zkQPw+32MeYOzM7OqnWpqampJd5NzL4pze+XelXrUg6K3zDs/IkQrjd4PQ8I9ikVUDnK5XMWkQNCHbp+ygNGForF4peDUvTsUB6C3sh+6nJ5QcCU8nXyT0yFmWRbEzJbUAJlcaQMQ2fTCTPzVUoshlKppMRU/jiwVyKb/Zs9xMU+caGuU14dS+z2BJfGmHZE31V2f4NE70Dr9RrS6bSapILB4A/RaBPz8zXZZzOZ130l9Ql0/fqAQXYbwQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1gwcFi447CI+xAAAABd0RVh0Q29tbWVudAAgSE9UU1BPVCAxMCAxNwqzzI0JAAAD2ElEQVR42q1WS0wbVxQ9Y8aOvzL/1mChhIQKEBGgWJGolKqL7lAjpKgVy+66q1iwi5QlUpdI2WTTRRdRRDfdQemyIBMplpAosakIAczHfAwmhrj+zLye+2R5k0qzGF/p6s3YM/ede+65940BB4tEInj27LkqFLwolfbw9m0aS0u/Or7ngYMZhoFCoYb37z/D0VEC9+5Noa2t7RvXgVtbW5Xf38kNTHoLTNNER0fHn64DX11dGYGALUHpHtRqlmwGJzPhTEV/OBzC7dtxlMtlRKNe7Ozs/OgaMY1FKyObPUUul8flZRGdnZ0vXCNub29/R9R1KhQ59sHj8cA1Ytu2EQ5HqIRW8ltCS4uJ8/Pz31wjFnQ+n6A0cefOFwgELiXw903huFKpUss31PE5zs4K6OrqeuM2MFNvQTAYEqmJUxVaxw+aghgo6uJ9/HiFarVG1Gc/OwKCsx3v7f397ePHHejvP6PcXmN5efmRo/6lMIODg2pra8uQBkgkEmpychJKKZkJODk5Ed1ibGxMF3FxcRE9PT04ODgQKWqqZmdnjU9U0dvbq6anp5FOp9Xq6io2NjaMWCymotGHwifTDqBY9PM6SDX8yxaPIRSKY3v7Gt3dfhb13f8jHh8fV3Nzc3y5KChkNmhPpb4mr18SuWi5Vi/kLV5X+ZtF+flgWTe4uHjD5/9CPv8H1ZMxGoiDwSD6+vr4kIWBgQH+WWEj1OhBpt7FTgO1C71S0kQIbggWEZRfhM98RaoeMMYPuL7+R+VyL1nkNDylUgk04VS6TG8g9uGDl5voIPxNrzpwJKI30fd+v9ReybWsfK4sWdF9MAVdNptlKnmRkV6Pj485wX4CkONLXgY0mEFFVi07pWyhh2uFGWzwnSXy//KuZRV2GlScnp6SzxSLsY2VlRURPyYmJjgmfyeyAEZGRsjjJe+HhFseTRlmU8TNTY3/fY5k8hdKcB31oA3TSYyOjqrd3V1Diia2sLCgkskk4vF4YxBNTU3p02NtbU0XmdIkz1XtLL7xiSrgYENDQ4rKwczMDNbX1yEZzs/Pp0hbwtV0E3vy5ClevfIR+SMWdAtizThMRYLk1aZbiMX62Bjd7ocQVSJyksLRbWq1KGPT/WHK+UA3GCzK4snqxebmZspt4HoX2qSjjP39fbbvBaRwzZjHbNGSaFnrWqk2DA8PK9eBZah7vWa90+RjxSNjtDkfLOSWaggT8S3Oirwcpu4Ds8W/Ozq6xuFhmagtniI6i1RTvitCIbshNwbXh2kzqIBlCb+GBNYndSaTMVwHpunOu3+/QD0fcgBd6O8KJ8n9B56m58z7G/geAAAAAElFTkSuQmCC\"","import Matter, {Body, Composite, Engine, Events, ICollision, Render, Runner} from \"matter-js\";\nimport explosionSprite from './explos09.png';\nimport ship1Sprite from './ship1.png';\nimport ship1SpriteThrust from './ship1-thrust.png';\nimport ship2Sprite from './ship2.png';\nimport ship2SpriteThurst from './ship2-thrust.png';\nimport sunSprite from './sun.png';\nimport backgroundSprite from './backgr.png';\nimport { DQNSolver, DQNOpt, DQNEnv } from 'reinforce-js';\nimport {Agent} from \"./Agent\";\n\nconst SUN_INFO = {\n    radius: 36\n}\n\nconst PLAYER_INFO = {\n    height: 34,\n    width: 21,\n    startingVelocity: 3,\n    startingDistance: 200\n}\n\nconst GRAVITY_CONSTANT = -0.0001;\n\nexport class GameRunner {\n    private tickInput: {player1: PlayerInput, player2: PlayerInput};\n    private _running: boolean;\n    private readonly player1IsHuman: boolean;\n    private readonly player2IsHuman: boolean;\n    private player2Agent: Agent | null;\n    private player1IsAlive: boolean;\n    private player2IsAlive: boolean;\n    private notifyEnd: (player1Win: boolean) => void | null;\n\n\n    // Matter-JS\n    private readonly engine: Engine;\n    private readonly render: Render;\n    private readonly runner: Runner;\n\n    // bodies\n    private readonly dimensions: Matter.Vector;\n    private readonly center: Matter.Vector;\n    private readonly sun : Matter.Body;\n    private readonly player1: Matter.Body;\n    private readonly player2: Matter.Body;\n\n    constructor(mountElement: HTMLDivElement,\n                player1IsHuman: boolean,\n                player2IsHuman: boolean,\n                player2Agent: Agent | null,\n                notifyEnd: (player1Win: boolean) => void | null,\n                timespeed: number,\n                width: number,\n                height: number\n    ) {\n        this.player1IsHuman = player1IsHuman;\n        this.player2IsHuman = player2IsHuman;\n        this.player2Agent = player2Agent;\n        this.notifyEnd = notifyEnd;\n        this.dimensions = Matter.Vector.create(width, height);\n        this.center = Matter.Vector.create(Math.floor(width/2), Math.floor(height/2));\n\n        // MatterJS Engine\n        this.engine = Engine.create();\n        this.engine.timing.timeScale = timespeed;\n        this.engine.gravity.scale = 0;\n\n        mountElement.setAttribute(\"style\",\n            `background-image: url('${backgroundSprite}'); background-repeat: repeat`\n        );\n\n        this.render = Render.create({\n            element: mountElement,\n            engine: this.engine,\n            options: {\n                wireframes: false,\n                background: \"transparent\",\n                width: width,\n                height: height\n            }\n        });\n        Render.run(this.render);\n        this.runner = Runner.create();\n        Runner.run(this.runner, this.engine);\n        this._running = true;\n\n        // Game Tick (need to wrap so 'this' works)\n        Events.on(this.runner, \"tick\", this.handleTick.bind(this) );\n        Events.on(this.runner, \"afterTick\", this.handleAfterTick.bind(this) );\n        Events.on(this.engine, \"collisionStart\", this.handleCollision.bind(this) );\n\n        // Add sun and Two player elements\n        this.sun = this.buildSun();\n        this.player1 = this.buildPlayer(0.5, ship1Sprite);\n        this.player1IsAlive = true;\n        this.player2 = this.buildPlayer(1.5, ship2Sprite);\n        this.player2IsAlive = true;\n        Composite.add(this.engine.world, [this.sun, this.player1, this.player2]);\n\n        // Keyboard events\n        this.tickInput = {\n            player1: {\n                rotateLeft: false,\n                rotateRight: false,\n                accelUp: false,\n                accelDown: false,\n                fireBullet: false\n            },\n            player2: {\n                rotateLeft: false,\n                rotateRight: false,\n                accelUp: false,\n                accelDown: false,\n                fireBullet: false\n            }\n        }\n\n        document.addEventListener(\"keydown\", this.handleKeyDown.bind(this) );\n        document.addEventListener(\"keyup\", this.handleKeyUp.bind(this) );\n    }\n    public isRunning(): boolean {\n        return this._running;\n    }\n    public setRunning(running: boolean) {\n        this._running = running;\n        this.runner.enabled = running;\n    }\n    public destroy() {\n        Render.stop(this.render);\n        this.render.element.innerHTML = \"\";\n        Runner.stop(this.runner);\n        Composite.rebase(this.engine.world);\n        Engine.clear(this.engine);\n    }\n\n    private handleCollision(event: Matter.IEventCollision<Body>): void {\n        for (let pair of event.pairs) {\n            let a = pair.bodyA;\n            let b = pair.bodyB;\n            for (let body of [a, b]){\n\n                if (body === this.player1) {\n                    // player 1 dies\n                    this.createExplosionAt(body.position);\n                    this.player1IsAlive = false;\n                    if(this.notifyEnd) {\n                        this.notifyEnd(false);\n                    }\n                }\n\n                if (body === this.player2) {\n                    // player 2 dies\n                    this.createExplosionAt(body.position);\n                    this.player2IsAlive = false;\n                    if(this.notifyEnd) {\n                        this.notifyEnd(true);\n                    }\n                }\n\n                if (body === this.sun){\n                    // sun outlives us all\n                } else {\n                    Composite.remove(this.engine.world, body);\n                }\n            }\n        }\n    }\n\n    private handleTick(event: Matter.IEvent<Body>): void {\n\n        let allBodies = Composite.allBodies(this.engine.world);\n        for(let body of allBodies) {\n            if (body !== this.sun) {\n                this.applyGravity(this.sun, body);\n            }\n        }\n\n        if(this.player1IsHuman && this.player1IsAlive){\n            if (this.tickInput.player1.accelUp) {\n                this.accelBody(this.player1);\n                if (this.player1.render.sprite) {\n                    this.player1.render.sprite.texture = ship1SpriteThrust;\n                }\n            }\n            else {\n                if (this.player1.render.sprite) {\n                    this.player1.render.sprite.texture = ship1Sprite;\n                }\n            }\n            if (this.tickInput.player1.rotateRight){\n                this.rotateBody(this.player1, 1);\n            }\n            if (this.tickInput.player1.rotateLeft){\n                this.rotateBody(this.player1, -1);\n            }\n            if (this.tickInput.player1.fireBullet){\n                this.shootBullet(this.player1, \"1\",'#FF0000');\n                this.tickInput.player1.fireBullet = false;\n            }\n        }\n\n        if(this.player2IsAlive){\n\n            let player2Input = this.tickInput.player2;\n\n            if (!this.player2IsHuman && this.player2Agent) {\n                player2Input = this.player2Agent.decideNextTickInput(\n                    {\n                        player1Alive: this.player1IsAlive,\n                        player2Alive: this.player2IsAlive,\n                        player1: this.player1,\n                        player2: this.player2,\n                        sun: this.sun\n                    }\n                );\n            }\n\n            if (player2Input.accelUp) {\n                this.accelBody(this.player2);\n                if (this.player2.render.sprite) {\n                    this.player2.render.sprite.texture = ship2SpriteThurst;\n                }\n            }\n            else {\n                if (this.player2.render.sprite) {\n                    this.player2.render.sprite.texture = ship2Sprite;\n                }\n            }\n            if (player2Input.rotateRight){\n                this.rotateBody(this.player2, 1);\n            }\n            if (player2Input.rotateLeft){\n                this.rotateBody(this.player2, -1);\n            }\n            if (player2Input.fireBullet){\n                this.shootBullet(this.player2, \"2\", '#0000FF');\n                this.tickInput.player2.fireBullet = false;\n            }\n        }\n    }\n\n    private handleAfterTick(event: Matter.IEvent<Body>) : void {\n\n        if (!this.player2IsHuman && this.player2Agent) {\n            this.player2Agent.rewardAfterTick({\n                player1Alive: this.player1IsAlive,\n                player2Alive: this.player2IsAlive,\n                player1: this.player1,\n                player2: this.player2,\n                sun: this.sun\n            });\n        }\n    }\n\n    private applyGravity(fromSun: Matter.Body, toBody: Matter.Body) {\n        let gravityVector = Matter.Vector.create(\n            toBody.position.x - fromSun.position.x,\n            toBody.position.y - fromSun.position.y\n        );\n\n        Matter.Body.applyForce(\n            toBody,\n            fromSun.position,\n            Matter.Vector.mult(Matter.Vector.normalise(gravityVector), GRAVITY_CONSTANT)\n        );\n    }\n\n    private rotateBody(body: Matter.Body, direction: 1 | -1){\n        Matter.Body.rotate(body, direction * 0.2);\n    }\n\n    private accelBody(body: Matter.Body){\n        let upVector = Matter.Vector.rotate(Matter.Vector.create(0.0001, 0), body.angle);\n        Matter.Body.applyForce(body, body.position , upVector);\n    }\n\n    private shootBullet(body: Matter.Body, label: string, color: string) {\n        let startingDirection = Matter.Vector.rotate(Matter.Vector.create(15,0), body.angle);\n        let startingPosition = Matter.Vector.add(body.position, startingDirection);\n        let bullet  = Matter.Bodies.circle(startingPosition.x, startingPosition.y, 2);\n        bullet.label = label;\n        bullet.frictionAir = 0;\n        bullet.frictionStatic = 0;\n        bullet.render.fillStyle = color;\n\n        let shootVector = Matter.Vector.rotate(Matter.Vector.create(5, 0), body.angle);\n\n        Matter.Body.setVelocity(bullet, shootVector);\n        Matter.Body.setMass(bullet, bullet.mass * 10);\n\n        Composite.add(this.engine.world, bullet);\n    }\n\n    private addSprite(body: Matter.Body, sprite: string) {\n        if(body.render.sprite){\n            body.render.sprite.texture = sprite;\n        } else {\n            body.render.sprite = {\n                texture: sprite,\n                xScale: 1,\n                yScale: 1\n            } as Matter.IBodyRenderOptionsSprite;\n        }\n    }\n\n\n    private createExplosionAt(position: Matter.Vector) {\n        let boom  = Matter.Bodies.circle(position.x, position.y, 36, {isStatic: true});\n        boom.collisionFilter.mask = 8;\n        boom.collisionFilter.group = 2;\n        boom.collisionFilter.category = 2;\n        this.addSprite(boom, explosionSprite);\n\n        Composite.add(this.engine.world, boom);\n    }\n\n    private buildSun(): Matter.Body {\n        let sun = Matter.Bodies.circle(this.center.x, this.center.y, SUN_INFO.radius, {isStatic: true});\n        sun.render.strokeStyle = '#000000';\n        this.addSprite(sun, sunSprite);\n        return sun;\n    }\n\n    private buildPlayer(radianStartingSpot: number, sprite: string): Matter.Body {\n\n        let position = Matter.Vector.add(\n            Matter.Vector.create(\n                PLAYER_INFO.startingDistance * Math.cos(radianStartingSpot * Math.PI),\n                PLAYER_INFO.startingDistance * Math.sin(radianStartingSpot * Math.PI)\n            ),\n            this.center\n        );\n\n        let player = Matter.Bodies.rectangle(position.x, position.y, PLAYER_INFO.width, PLAYER_INFO.height);\n        player.frictionAir = 0;\n        player.frictionStatic = 0;\n        player.render.fillStyle = '#ff0000';\n        this.addSprite(player, sprite);\n        let perpendicularVelocityAngle = ( Matter.Vector.angle(this.center, player.position) + 90 ) % 360;\n        Matter.Body.setVelocity(player,\n            Matter.Vector.rotate(Matter.Vector.create(-PLAYER_INFO.startingVelocity, 0), perpendicularVelocityAngle)\n        );\n        return player;\n    }\n\n    private handleKeyDown(event: KeyboardEvent): void {\n        if(this.player1IsHuman) {\n            this.tickInput.player1[player1KeyMapping[event.key]] = true;\n        }\n        if(this.player2IsHuman) {\n            this.tickInput.player2[player2KeyMapping[event.key]] = true;\n        }\n    }\n\n    private handleKeyUp(event: KeyboardEvent): void {\n        if(this.player1IsHuman) {\n            this.tickInput.player1[player1KeyMapping[event.key]] = false;\n        }\n        if(this.player2IsHuman) {\n            this.tickInput.player2[player2KeyMapping[event.key]] = false;\n        }\n    }\n}\n\nconst player1KeyMapping: {[key: string] : \"rotateLeft\" | \"accelDown\" | \"rotateRight\" | \"accelUp\" | \"fireBullet\" } = {\n    \"a\": \"rotateLeft\",\n    \"s\": \"accelDown\",\n    \"d\": \"rotateRight\",\n    \"w\": \"accelUp\",\n    \"q\": \"fireBullet\"\n}\n\nconst player2KeyMapping: {[key: string] : \"rotateLeft\" | \"accelDown\" | \"rotateRight\" | \"accelUp\" | \"fireBullet\" } = {\n    \"j\": \"rotateLeft\",\n    \"k\": \"accelDown\",\n    \"l\": \"rotateRight\",\n    \"i\": \"accelUp\",\n    \"u\": \"fireBullet\"\n}\n\nexport interface PlayerInput {\n    rotateLeft: boolean,\n    rotateRight: boolean,\n    accelUp: boolean,\n    accelDown: boolean,\n    fireBullet: boolean\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADwBAMAAACDA6BYAAAABGdBTUEAALGPC/xhBQAAABtQTFRFDw8PLy8vPz8/T09PX19ff39/j4+Pr6+v39/frETAxAAAAtxJREFUeNrtnT2O2zAQhWe01G77Ch6AAXKAHIEM4NQqBKR1EWDbNAvkBrl2kErYQoAUjqTn7PsAAy5sw37mzLzhj2T9fH79UWwH1c7m2faQZ1gXbntJZmcqmHHwT0Lnx3qvpMu74pXyAEmXd3UybPjUcAWjvvTjA+PGmxQUQqwkd2oyLAwVMiEeJPCTkTMaN/l1BpE7866ePN7f+oZK82QhlM7Kt66gK4UIIdTV76cS5LzwSegMKaiZJSHUvap7XcVvjVzvRFD2AjUZHtIgcZNnSEEZJLEJ8BZqvy5YMra/auJdX/K/j29vzbi5GzkVxs2nxm7IC6WpzLjcxCNcjZHdrbxw+z2//Xpr5Aqym4BRrbjW0dTIqJk+nMoerFC62zTzqILRhyslR+CNXYKiqsRdlZxdwQyDtk8LlYM1QH5Oyhu7gkV2QufshPbifOAjZDhWQWdPThnkVcSVfwkqGC4aJGCv4ZV9DE3HjABEhO+y9yE0BnzPgEin7X0o75MuwqZd60HNfZiCuDbnumbgtC70L0BzNIoWKahZCvX3fOu1zr7indgVHI/X3SMuhOG02wCeFz/PuZHiafHznAq6dt49ZDEdmnGTC7uCMvOHMRkvOvATNgbBXCywOVAyrqq2eQaXgsmcOtX4rSVQJ+tkg9pSIR5yeIL8wrre2BUsJhRpIWSQ92fO3J8heLEFZ3axlaErnoLVmOK7WPKu+M7eFVf2mRlokfBswC51PcRLemzijPeSGeTTf0NgotMUdCeQ015w9pPbGVct2SImthP73nLXviNZlSBAXib8q21lYlfwJ3eI5e+/Z/Ae4VwU1Gq5zJ5QYQuisv+CaauvBOsWnHJx9rlzHF1wW+NLbP6O793AEe6upTTdDVb/PnFh9eVZY//TikJWVyATurmULvGqMSiE4uBD5GJnVzCxj8HRyHkxVpa7rkjBrmAcCbo3irw4yGEJmZb/rP0Zj1xm+wPmtje1byJGtwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import {Agent, EnvState} from \"./Agent\";\nimport {PlayerInput} from \"./GameRunner\";\nimport {DQNEnv, DQNOpt, DQNSolver} from \"reinforce-js\";\nimport Matter from \"matter-js\";\n\nexport class MachineLearningAgent implements Agent {\n\n    // Machine Learning\n    private ml_solver : DQNSolver;\n    private ml_env : DQNEnv;\n    /*\n    inputs:\n    1. angle of attack of red\n    2. distance from red\n    3. angle of attack from sun\n    4. distance from sun\n    5. red is alive\n    6. blue is alive\n */\n    private readonly ML_NUM_INPUTS = 6;\n\n    /*\n    actions:\n    1. do nothing\n    2. turn left\n    3. turn right\n    4. accel up\n    5. fire\n     */\n    private readonly ML_NUM_ACTIONS = 5;\n    private readonly ML_TEMPORAL_WINDOW = 30;\n\n    private tickCount : number = 0;\n\n    constructor(width: number, height: number) {\n\n        // Machine Learning\n        this.ml_env = new DQNEnv(width, height, this.ML_NUM_INPUTS, this.ML_NUM_ACTIONS);\n        let ml_opts = this.getMlOptions();\n        this.ml_solver = new DQNSolver(this.ml_env, ml_opts);\n        this.tickCount = 0;\n    }\n\n    private getMlOptions(): DQNOpt {\n\n        var network_size = this.ML_NUM_INPUTS*this.ML_TEMPORAL_WINDOW + this.ML_NUM_ACTIONS*this.ML_TEMPORAL_WINDOW + this.ML_NUM_INPUTS;\n\n        let layer_defs: Array<any> = [];\n        layer_defs.push({type:'input', out_sx:1, out_sy:1, out_depth:network_size});\n        layer_defs.push({type:'fc', num_neurons: 50, activation:'relu'});\n        layer_defs.push({type:'fc', num_neurons: 50, activation:'relu'});\n        layer_defs.push({type:'regression', num_classes: this.ML_NUM_ACTIONS}); //  num_neurons\n\n        let opts: DQNOpt = new DQNOpt();\n        opts.setTrainingMode(true);\n        opts.setNumberOfHiddenUnits([100]);  // mind the array here, currently only one layer supported! Preparation for DNN in progress...\n        opts.setEpsilonDecay(1.0, 0.1, 1e6);\n        opts.setEpsilon(0.05);\n        opts.setGamma(0.9);\n        opts.setAlpha(0.005);\n        opts.setLossClipping(true);\n        opts.setLossClamp(1.0);\n        opts.setRewardClipping(true);\n        opts.setRewardClamp(1.0);\n        opts.setExperienceSize(1e6);\n        opts.setReplayInterval(100);\n        opts.setReplaySteps(100);\n\n        return opts;\n    }\n\n    decideNextTickInput(envState: EnvState): PlayerInput {\n        let playerInput: PlayerInput = {\n            rotateLeft: false,\n            rotateRight: false,\n            accelUp: false,\n            accelDown: false,\n            fireBullet: false\n        };\n\n        /*\n        1. angle of attack of red\n        2. distance from red\n        3. angle of attack from sun\n        4. distance from sun\n        5. red is alive\n        6. blue is alive\n         */\n\n        let sunDifferenceVector = Matter.Vector.sub(envState.player2.position, envState.sun.position);\n        let sunDistance = Matter.Vector.magnitude(sunDifferenceVector);\n        let sunAngleOfAttack = Matter.Vector.angle(envState.player2.position, envState.sun.position);\n\n        let playerDifferenceVector = Matter.Vector.sub(envState.player1.position, envState.player2.position);\n        let playerDistance = Matter.Vector.magnitude(playerDifferenceVector);\n        let playerAngleOfAttack = Matter.Vector.angle(envState.player1.position, envState.player2.position);\n\n        let nextState = [\n            playerAngleOfAttack,\n            playerDistance,\n            sunAngleOfAttack,\n            sunDistance,\n            envState.player1Alive ? 1 : 0,\n            envState.player2Alive ? 1 : 0\n        ];\n\n        let action = this.ml_solver.decide(nextState);\n\n        if (action === 0) {\n            // do nothing!\n        } else if (action === 1) {\n            playerInput.rotateLeft = true;\n        } else if (action === 2) {\n            playerInput.rotateRight = true;\n        } else if (action === 3) {\n            playerInput.accelUp = true;\n        } else if (action === 4) {\n            //playerInput.fireBullet = true;\n        } else {\n            // do nothing\n        }\n\n        return playerInput;\n    }\n\n    rewardAfterTick(envState: EnvState): void {\n        let playerDifferenceVector = Matter.Vector.sub(envState.player1.position, envState.player2.position);\n        let playerDistance = Matter.Vector.magnitude(playerDifferenceVector);\n\n        let sunDifferenceVector = Matter.Vector.sub(envState.player2.position, envState.sun.position);\n        let sunDistance = Matter.Vector.magnitude(sunDifferenceVector);\n\n        this.ml_solver.learn( 1 / sunDistance + 40);\n\n    }\n\n    loadState(state: any): void {\n        this.ml_solver.fromJSON(state);\n    }\n\n    saveState(): any {\n        return this.ml_solver.toJSON();\n    }\n\n    rewardGame(didWin: boolean): void {\n\n        /*\n        if (didWin) {\n            this.ml_solver.learn(this.tickCount + 1000);\n        } else {\n            this.ml_solver.learn(this.tickCount - 1000);\n        }\n         */\n    }\n\n}","import React, {SyntheticEvent} from 'react';\nimport {GameOptions, PlayerType, WebSpaceDuel} from \"./WebSpaceDuel/WebSpaceDuel\";\nimport {Instructions} from \"./Instructions\";\n\nclass GameContainer extends React.Component<{}, GameOptions> {\n    private readonly canvasDivRef : React.RefObject<HTMLDivElement>;\n    private readonly game: WebSpaceDuel;\n\n    constructor(props: any) {\n        super(props);\n        this.canvasDivRef = React.createRef();\n        this.game = new WebSpaceDuel();\n\n        this.state = {\n            player1: PlayerType.Human,\n            player2: PlayerType.AILevel1,\n            width: 800,\n            height: 600,\n            showInstructions: false,\n            trainAgent: false\n        };\n    }\n\n    componentDidMount() {\n        if(this.canvasDivRef && this.canvasDivRef.current) {\n            //startGame(this.canvasDivRef.current);\n            this.game.mountGame(this.canvasDivRef.current);\n            this.handleNewGame();\n        }\n    }\n\n    handlePauseGame() {\n        this.game.pauseGame();\n    }\n\n    handleNewGame() {\n        this.game.newGame(this.state);\n    }\n\n    handleCheckChange(e: SyntheticEvent) {\n        let target = e.target as HTMLInputElement;\n        let newValue = target.checked ? PlayerType.Human : PlayerType.AILevel1;\n        if (target.name === \"player1\") {\n            console.log(\"setting player 1 to \", newValue);\n            this.setState({player1: newValue});\n        }\n\n        if (target.name === \"player2\"){\n            console.log(\"setting player 2 to \", newValue)\n            this.setState({player2: newValue});\n        }\n    }\n\n    toggleTraining(e: SyntheticEvent) {\n        this.setState({trainAgent: !this.state.trainAgent});\n    }\n\n    toggleInstructions(e: SyntheticEvent) {\n        this.setState({showInstructions: !this.state.showInstructions});\n    }\n\n    render() {\n        return (\n            <div className=\"App-game\">\n\n                <button onClick={this.handleNewGame.bind(this)}>New Game</button>\n                <button onClick={this.toggleInstructions.bind(this)}>Instructions</button>\n\n                <label htmlFor={\"player2-train\"}>Train AI</label>\n                <input type={\"checkbox\"}\n                       name={\"player2-train\"}\n                       id={\"player2-train\"}\n                       checked={this.state.trainAgent === true}\n                       onChange={this.toggleTraining.bind(this)}\n                />\n\n                <label htmlFor={\"player2\"}>Player 2 is human</label>\n                <input type={\"checkbox\"}\n                       name={\"player2\"}\n                       id={\"player2\"}\n                       checked={this.state.player2 === PlayerType.Human}\n                       onChange={this.handleCheckChange.bind(this)}\n                />\n\n                { (this.state.showInstructions) ? Instructions(this.state) : \"\"}\n                {/*<button onClick={this.handlePauseGame.bind(this)}>{this.game.isPaused() ? \"Resume Game\" : \"Pause Game\"}</button> */}\n                <div className={\"playwindow\"} ref={this.canvasDivRef} />\n\n            </div>\n        );\n    }\n\n    unused() {\n        return (\n            <div>\n            <label htmlFor={\"player1\"}>Player 1 is human</label>\n                <input type={\"checkbox\"}\n                       name={\"player1\"}\n                       id={\"player1\"}\n                       checked={this.state.player1 === PlayerType.Human}\n                       onChange={this.handleCheckChange.bind(this)}\n                />\n\n\n            </div>\n        )\n    }\n}\n\nexport default GameContainer;","import {GameOptions} from \"./WebSpaceDuel/WebSpaceDuel\";\n\nexport function Instructions(settings: GameOptions){\n    return (\n        <div className={\"App-instructions\"}>\n            <p>\n                You are the red satellite orbiting the Sun.  Your goal is to shoot the blue satellite before it shoots you.\n            </p>\n            <div className={\"Key-table-wrapper\"}>\n                <table className={\"Key-table\"}>\n                    <tr>\n                        <td colSpan={2}>Player 1</td>\n                    </tr>\n                    <tr>\n                        <td>a</td>\n                        <td>Spin Left</td>\n                    </tr>\n                    <tr>\n                        <td>d</td>\n                        <td>Spin Right</td>\n                    </tr>\n                    <tr>\n                        <td>w</td>\n                        <td>Thrust</td>\n                    </tr>\n                    <tr>\n                        <td>q</td>\n                        <td>Shoot</td>\n                    </tr>\n\n                </table>\n\n                <table className={\"Key-table\"}>\n                    <tr>\n                        <td colSpan={2}>Player 2</td>\n                    </tr>\n                    <tr>\n                        <td>j</td>\n                        <td>Spin Left</td>\n                    </tr>\n                    <tr>\n                        <td>l</td>\n                        <td>Spin Right</td>\n                    </tr>\n                    <tr>\n                        <td>i</td>\n                        <td>Thrust</td>\n                    </tr>\n                    <tr>\n                        <td>u</td>\n                        <td>Shoot</td>\n                    </tr>\n\n                </table>\n            </div>\n        </div>\n    )\n}","import React from 'react';\nimport './App.css';\nimport GameContainer from \"./GameContainer\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>\n          Space Duel on the Web\n        </h1>\n      </header>\n        <GameContainer/>\n        <footer className=\"App-footer\">\n            A React port of <a href=\"https://github.com/KDE/kspaceduel/\">KSpaceDuel</a> using <a href=\"https://brm.io/matter-js/\">Matter-JS</a>\n        </footer>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}